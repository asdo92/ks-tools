.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "" "" "" "" ""
.SH ks\-mp4k \- Convert video file to compact and efficient MP4 (4K).
.SS Syntax:
.IP
.EX
$ ks\-mp4k </absolute/path/video.mkv> </path/prefix_name>
.EE
.SS Default configuration:
.IP \[bu] 2
The script \f[CR]ks\-mp4k\f[R] use by default the following
configuration:
.RS 2
.IP
.EX
\- Resolution: 3840x2160
\- Video codec: libx264
\- Bitrate video: 6000k
\- Preset: medium
\- Audio codec: aac (stereo)
\- Bitrate audio: 320k
\- Default Audio: spa
\- Default Subtitle: spa (forced)
\- Container: mp4
.EE
.RE
.IP \[bu] 2
If you want to change the settings, you need to edit the
\f[CR]\[ti]/.ks\-tools/ks\-mp4k\f[R] file and change the following
variables:
.RS 2
.IP
.EX
rel_size=\[dq]3840x2160\[dq]
vcodec=\[dq]libx264\[dq]
b_vcodec=\[dq]6000k\[dq]
v_preset=\[dq]medium\[dq]
acodec=\[dq]aac\[dq]
b_acodec=\[dq]320k\[dq]
default_lang_audio=\[dq]spa\[dq]
default_lang_subt=\[dq]spa\[dq]
v_ext=\[dq]mp4\[dq]
.EE
.RE
.IP \[bu] 2
RECOMMENDED: You can use the ks\-conf tool to edit the configuration.
.SS Example of use:
.IP \[bu] 2
An example of use would be the following:
.RS 2
.IP
.EX
$ ks\-mp4k /data/movies/Example.mkv /data/converted/Example
.EE
.RE
.IP \[bu] 2
Executing the command, the file will be analyzed and a wizard will be
shown to select the tracks, choose the settings and define the metadata:
.RS 2
.IP
.EX
* Information of Example.mkv:

+ Video Tracks:
Stream #0:0: Video: h264 (High)

+ Audio Tracks:
Stream #0:1(spa): Audio: ac3
Stream #0:2(eng): Audio: ac3

+ Subtitle Tracks:
Stream #0:3(spa): Subtitle: subrip (default) (forced)
Stream #0:4(spa): Subtitle: hdmv_pgs_subtitle
Stream #0:5(spa): Subtitle: subrip (forced)
Stream #0:6(eng): Subtitle: subrip

* (Default: 0:0) Type the number of video track: 
* (Default: 0:1) Type the number of audio track: 
* (Default: n) Do you want include subtitles? (y/n): y
* (Default: 0:3) Type the number of subtitle track: 0:5
* (Default: n) Do you want to force widescreen (for 4:3 input)? (y/n):
* (Default: 3840x2160) Type the resolution: 
* (Default: n) Do you want apply \[aq]\-max_muxing_queue_size 9999\[aq] patch? (y/n): n

* METADATA configuration:

* (Default: Example) Type name of title: 
* (Default: 2021) Type the year: 2016
* (Default: Unknown) Type the genre: Thriller

* COMMANDS THAT WILL BE EXECUTED:

  # Extract subtitles from file Example.mkv
  ffmpeg \-i \[dq]Example.mkv\[dq] \-map 0:5 \[dq]Example.srt\[dq]

  # Convert the file \[aq]Example.mkv\[aq] to MP4
  ffmpeg \-i \[dq]Example.mkv\[dq] \-fps_mode cfr \-af aresample=async=1 \-map 0:0 \-map 0:1 
  \-vf subtitles=\[dq]Example.srt\[dq] \-s 3840x2160 \-c:v libx264 \-profile:v high 
  \-b:v 6000k \-preset medium \-c:a aac \-b:a 320k \-ac 2 \-clev 3dB \-slev \-6dB 
  \-metadata title=\[dq]Example (2016)\[dq] \-metadata date=\[dq]2016\[dq] \-metadata genre=\[dq]Thriller\[dq] 
  \-metadata:s:v:0 title=\[dq]Example (2016)\[dq] 
  \-metadata:s:a:0 title=\[dq]aac Stereo Audio (320k)\[dq] \[dq]Example.mp4\[dq]

* (Default: y) Do you want run the conversion? (y/n): n
.EE
.RE
.SS Back to README.md
.IP \[bu] 2
Go back
